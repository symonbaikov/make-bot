# üîß Railway –Ω–µ –¥–µ–ø–ª–æ–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç - –†–µ—à–µ–Ω–∏–µ

## –ü—Ä–æ–±–ª–µ–º–∞

Railway –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—É—à–µ–Ω–Ω—ã–π –∫–æ–º–º–∏—Ç –∏ –Ω–µ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ö–æ—Ç—è —Ä–∞–Ω—å—à–µ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–ª–æ.

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–º–º–∏—Ç –∑–∞–ø—É—à–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
git status

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã
git log --oneline -5

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ª–æ–∫–∞–ª—å–Ω–∞—è –≤–µ—Ç–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å origin
git log origin/main..HEAD --oneline
# –ï—Å–ª–∏ –ø—É—Å—Ç–æ - –∑–Ω–∞—á–∏—Ç –≤—Å–µ –∑–∞–ø—É—à–µ–Ω–æ
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Railway

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard** ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. **–û—Ç–∫—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–∏—Å** (Backend –∏–ª–∏ Bot)
3. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings** ‚Üí **Source**
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - ‚úÖ **Repository** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π?
   - ‚úÖ **Branch** - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å `main` (–∏–ª–∏ –≤–∞—à–∞ —Ä–∞–±–æ—á–∞—è –≤–µ—Ç–∫–∞)
   - ‚úÖ **Root Directory** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–∏ –ø—É—Ç—å? (`backend` –∏–ª–∏ `bot`)

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Webhook –æ—Ç GitHub

1. **–û—Ç–∫—Ä–æ–π—Ç–µ GitHub** ‚Üí –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. **Settings** ‚Üí **Webhooks**
3. –ù–∞–π–¥–∏—Ç–µ webhook –¥–ª—è Railway
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - ‚úÖ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏ (Recent Deliveries)
   - ‚úÖ –ï—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ (–∫—Ä–∞—Å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã)?
   - ‚úÖ –ö–æ–≥–¥–∞ –±—ã–ª–∞ –ø–æ—Å–ª–µ–¥–Ω—è—è –¥–æ—Å—Ç–∞–≤–∫–∞?

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard** ‚Üí –≤–∞—à —Å–µ—Ä–≤–∏—Å
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Deployments**
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - ‚úÖ –ö–æ–≥–¥–∞ –±—ã–ª –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π?
   - ‚úÖ –ö–∞–∫–æ–π –∫–æ–º–º–∏—Ç –±—ã–ª –∑–∞–¥–µ–ø–ª–æ–µ–Ω?
   - ‚úÖ –ï—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏?

## üõ†Ô∏è –†–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–¥–µ–ø–ª–æ–π

**–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±:**

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard** ‚Üí –≤–∞—à —Å–µ—Ä–≤–∏—Å
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Deployments**
3. **–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç—Ä–∏ —Ç–æ—á–∫–∏** (‚ãÆ) —Ä—è–¥–æ–º —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º –¥–µ–ø–ª–æ–µ–º
4. **–í—ã–±–µ—Ä–∏—Ç–µ "Redeploy"**

–ò–ª–∏:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard** ‚Üí –≤–∞—à —Å–µ—Ä–≤–∏—Å
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings** ‚Üí **Deploy**
3. **–ù–∞–∂–º–∏—Ç–µ "Redeploy"**

### –†–µ—à–µ–Ω–∏–µ 2: –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

–ï—Å–ª–∏ webhook —Å–ª–æ–º–∞–Ω:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard** ‚Üí –≤–∞—à —Å–µ—Ä–≤–∏—Å
2. **Settings** ‚Üí **Source**
3. **Disconnect** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. **Connect** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∑–∞–Ω–æ–≤–æ
5. –í—ã–±–µ—Ä–∏—Ç–µ:
   - Repository: `symonbaikov/make-bot`
   - Branch: `main`
   - Root Directory: `backend` (–¥–ª—è Backend) –∏–ª–∏ `bot` (–¥–ª—è Bot)

### –†–µ—à–µ–Ω–∏–µ 3: –°–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç–æ–π –∫–æ–º–º–∏—Ç –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π:

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –ø—É—Å—Ç–æ–π –∫–æ–º–º–∏—Ç
git commit --allow-empty -m "trigger railway deployment"

# –ó–∞–ø—É—à—å—Ç–µ
git push origin main
```

### –†–µ—à–µ–Ω–∏–µ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å railway.json

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `railway.json` —Ñ–∞–π–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

**–î–ª—è Backend** (`railway.json` –≤ –∫–æ—Ä–Ω–µ –∏–ª–∏ `backend/railway.json`):

```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "DOCKERFILE",
    "dockerfilePath": "backend/Dockerfile"
  },
  "deploy": {
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10,
    "startCommand": "/app/docker-entrypoint.sh"
  }
}
```

**–î–ª—è Bot** (`bot/railway.json`):

```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "DOCKERFILE",
    "dockerfilePath": "bot/Dockerfile"
  },
  "deploy": {
    "startCommand": "node dist/index.js",
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  }
}
```

### –†–µ—à–µ–Ω–∏–µ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GitHub Webhook

–ï—Å–ª–∏ webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **GitHub** ‚Üí –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí **Settings** ‚Üí **Webhooks**
2. –ù–∞–π–¥–∏—Ç–µ webhook –¥–ª—è Railway (–æ–±—ã—á–Ω–æ `https://api.railway.app/webhook/...`)
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏:**
   - –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ - –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–µ—Ç–∞–ª–∏
   - –ï—Å–ª–∏ webhook –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - Railway —Å–æ–∑–¥–∞—Å—Ç –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏

4. **–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ Railway** (—Å–º. –†–µ—à–µ–Ω–∏–µ 2)

### –†–µ—à–µ–Ω–∏–µ 6: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–µ—Ç–∫–∏

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Railway –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≤–µ—Ç–∫—É:

1. **Railway Dashboard** ‚Üí —Å–µ—Ä–≤–∏—Å ‚Üí **Settings** ‚Üí **Source**
2. **Branch** –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å `main` (–∏–ª–∏ –≤–∞—à–∞ —Ä–∞–±–æ—á–∞—è –≤–µ—Ç–∫–∞)
3. –ï—Å–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –∏–∑–º–µ–Ω–∏—Ç–µ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –†–µ—à–µ–Ω–∏–µ 7: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Railway CLI –¥–ª—è –¥–µ–ø–ª–æ—è

–ï—Å–ª–∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Railway CLI (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
npm i -g @railway/cli

# –í–æ–π–¥–∏—Ç–µ
railway login

# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ø—Ä–æ–µ–∫—Ç—É
railway link

# –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ
railway up
```

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:

```bash
#!/bin/bash
# check-railway-sync.sh

echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å Railway..."

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫–æ–º–º–∏—Ç–æ–≤
LOCAL_COMMITS=$(git log origin/main..HEAD --oneline | wc -l | tr -d ' ')

if [ "$LOCAL_COMMITS" -gt 0 ]; then
  echo "‚ö†Ô∏è  –ï—Å—Ç—å $LOCAL_COMMITS –Ω–µ –∑–∞–ø—É—à–µ–Ω–Ω—ã—Ö –∫–æ–º–º–∏—Ç–æ–≤!"
  echo "–ó–∞–ø—É—à—å—Ç–µ –∫–æ–º–º–∏—Ç—ã: git push origin main"
  exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–∏—Ç–∞
LAST_COMMIT=$(git log -1 --oneline)
echo "‚úÖ –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç: $LAST_COMMIT"
echo "‚úÖ –í—Å–µ –∫–æ–º–º–∏—Ç—ã –∑–∞–ø—É—à–µ–Ω—ã –≤ origin/main"

echo ""
echo "üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
echo "1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Railway Dashboard ‚Üí Deployments"
echo "2. –ï—Å–ª–∏ –¥–µ–ø–ª–æ–π –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ 'Redeploy'"
echo "3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Source ‚Üí Branch"
```

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã

- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª, —á—Ç–æ –∫–æ–º–º–∏—Ç –∑–∞–ø—É—à–µ–Ω –≤ GitHub
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Railway (Branch, Root Directory)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–ø–ª–æ–∏ –≤ Railway
- [ ] –ü–æ–ø—Ä–æ–±–æ–≤–∞–ª –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π Redeploy
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª GitHub Webhooks –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
- [ ] –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏–ª —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ Railway (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª railway.json —Ñ–∞–π–ª—ã
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª Railway CLI (–µ—Å–ª–∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

## üéØ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ)

1. **Railway Dashboard** ‚Üí —Å–µ—Ä–≤–∏—Å ‚Üí **Deployments** ‚Üí **Redeploy**
2. –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ:
   - **Settings** ‚Üí **Source** ‚Üí **Disconnect** ‚Üí **Connect** –∑–∞–Ω–æ–≤–æ
3. –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
   - –°–æ–∑–¥–∞–π—Ç–µ –ø—É—Å—Ç–æ–π –∫–æ–º–º–∏—Ç: `git commit --allow-empty -m "trigger deploy" && git push`

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–º–æ—â—å

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [Railway Status Page](https://status.railway.app/)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [Railway Discord](https://discord.gg/railway)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ —Å–±–æ—Ä–∫–∏
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é –≤ Railway

## üîç –ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã

1. **Webhook –æ—Ç GitHub —Å–ª–æ–º–∞–Ω** - –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–µ—Ç–∫–∞** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ Settings ‚Üí Source ‚Üí Branch
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Root Directory** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–∏—Å–∞
4. **Railway –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç webhook** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ GitHub Webhooks
5. **–ü—Ä–æ–±–ª–µ–º—ã —Å railway.json** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å JSON
6. **Railway –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å—Ç—Ä–∞–Ω–∏—Ü—É

