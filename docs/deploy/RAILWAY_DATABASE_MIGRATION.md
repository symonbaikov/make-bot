# üóÑÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –º–∏–≥—Ä–∞—Ü–∏–π –≤ Railway

## –ü—Ä–æ–±–ª–µ–º–∞

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏:
- `The table public.web_users does not exist`
- `relation "web_users" does not exist`
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ `localhost:5433` –≤–º–µ—Å—Ç–æ Railway PostgreSQL

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ:
1. –ú–∏–≥—Ä–∞—Ü–∏–∏ Prisma –Ω–µ –±—ã–ª–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
2. `DATABASE_URL` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ Railway

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ DATABASE_URL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Backend —Å–µ—Ä–≤–∏—Å** –≤ Railway ‚Üí **Variables**
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `DATABASE_URL` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω** –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–π URL (–Ω–µ placeholder)
3. **–ï—Å–ª–∏ –Ω–µ—Ç PostgreSQL —Å–µ—Ä–≤–∏—Å–∞:**
   - –°–æ–∑–¥–∞–π—Ç–µ PostgreSQL —Å–µ—Ä–≤–∏—Å (—Å–º. `docs/deploy/RAILWAY_DATABASE_SETUP.md`)
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `DATABASE_URL` –∏–∑ PostgreSQL —Å–µ—Ä–≤–∏—Å–∞
   - –í—Å—Ç–∞–≤—å—Ç–µ –≤ Backend —Å–µ—Ä–≤–∏—Å

### –®–∞–≥ 2: –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ Backend

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Backend —Å–µ—Ä–≤–∏—Å** ‚Üí **Deploy** ‚Üí **Redeploy**
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏ (Build Logs):**
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `Running database migrations...`
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `Database is up to date!`
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `Running database seed...` (–µ—Å–ª–∏ seed –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–µ–ø–ª–æ—è (Deploy Logs):**
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `Database ready!`
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `Running database migrations...`
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `Database is up to date!`
   - –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ –ø—Ä–æ `web_users does not exist`

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **Health check:**
   ```
   https://your-backend.railway.app/health
   ```
   –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å `{"status":"ok"}`

2. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ `https://your-backend.railway.app/`
   - –í–≤–µ–¥–∏—Ç–µ email –∏ password
   - –î–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤—Ö–æ–¥ (–µ—Å–ª–∏ seed —Å–æ–∑–¥–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç docker-entrypoint.sh

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `docker-entrypoint.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–ñ–¥–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
2. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç Prisma Client** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
3. **–ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏:**
   - –ï—Å–ª–∏ –µ—Å—Ç—å —Ñ–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `prisma migrate deploy`
   - –ï—Å–ª–∏ –Ω–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–π ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `prisma db push`
4. **–ó–∞–ø—É—Å–∫–∞–µ—Ç seed** (—Å–æ–∑–¥–∞–µ—Ç –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
5. **–ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**

## Troubleshooting

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. `DATABASE_URL` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
2. PostgreSQL —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
3. –õ–æ–≥–∏ –¥–µ–ø–ª–æ—è –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –æ—à–∏–±–æ–∫ –º–∏–≥—Ä–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `DATABASE_URL` —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –∏–∑ PostgreSQL —Å–µ—Ä–≤–∏—Å–∞
- –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ Backend —Å–µ—Ä–≤–∏—Å

### –¢–∞–±–ª–∏—Ü–∞ web_users –≤—Å–µ –µ—â–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Railway PostgreSQL —Å–µ—Ä–≤–∏—Å
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã:
   ```sql
   \dt
   ```
3. –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü –Ω–µ—Ç, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é:
   ```bash
   npx prisma db push
   ```

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ localhost –≤–º–µ—Å—Ç–æ Railway

**–ü—Ä–æ–±–ª–µ–º–∞:** `DATABASE_URL` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç placeholder

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `DATABASE_URL` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Variables Backend —Å–µ—Ä–≤–∏—Å–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ PostgreSQL —Å–µ—Ä–≤–∏—Å–∞ (–Ω–µ placeholder)
3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ Backend

## –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

1. **–ß–µ—Ä–µ–∑ seed (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏):**
   - Seed –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ `docker-entrypoint.sh`
   - –°–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `admin@example.com` / `admin123`

2. **–í—Ä—É—á–Ω—É—é (–µ—Å–ª–∏ seed –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç):**
   ```bash
   npm run db:seed
   ```

3. **–ß–µ—Ä–µ–∑ Prisma Studio:**
   ```bash
   npx prisma studio
   ```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã:

- `web_users` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –≤–µ–±-–ø–∞–Ω–µ–ª–∏
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Telegram –±–æ—Ç–∞
- `sessions` - —Å–µ—Å—Å–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π
- `actions` - –∂—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ Railway PostgreSQL ‚Üí **Query**:
```sql
SELECT table_name FROM information_schema.tables 
WHERE table_schema = 'public';
```

