# üöÄ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Ç–∞–±–ª–∏—Ü—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –±—ã–ª–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫ —ç—Ç–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏

### –®–∞–≥ 1: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ DATABASE_URL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

```bash
cd /Users/symonbaikov/make-bot/backend

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ DATABASE_URL —Å TCP Proxy (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
export DATABASE_URL="postgresql://postgres:YOUR_PASSWORD@shortline.proxy.rlwy.net:24524/railway"
```

### –®–∞–≥ 2: –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ —Å—Ö–µ–º—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
npx prisma db push --skip-generate --accept-data-loss
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- `The database is now in sync with your Prisma schema.`
- –ò–ª–∏ —Å–ø–∏—Å–æ–∫ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ seed (—Å–æ–∑–¥–∞—Å—Ç –∞–¥–º–∏–Ω–∞)

```bash
npm run db:seed
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- `Created admin user: admin@example.com`
- `Created/updated test session: test-session-001`
- `Seeding completed!`

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—ã —Å–Ω–æ–≤–∞

```bash
../scripts/check-tables.sh
```

–¢–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–∞–±–ª–∏—Ü—ã:
- `_prisma_migrations`
- `actions`
- `sessions`
- `users`
- `web_users`

## –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏:

–ü–æ—Å–ª–µ `prisma db push` Prisma —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏–∑ —Å—Ö–µ–º—ã `prisma/schema.prisma`:
- `web_users` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Telegram
- `sessions` - —Å–µ—Å—Å–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π
- `actions` - –∂—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π

–ü–æ—Å–ª–µ `db:seed` –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∞–¥–º–∏–Ω: `admin@example.com` / `admin123`

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Prisma Studio:

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ:

```bash
npx prisma studio
```

Prisma Studio –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –¥–∞–Ω–Ω—ã–µ.

## –ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
   ```bash
   npx prisma db execute --stdin <<< "SELECT 1;"
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Prisma schema:**
   ```bash
   ls -la prisma/schema.prisma
   ```

3. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å verbose –≤—ã–≤–æ–¥–æ–º:**
   ```bash
   npx prisma db push --skip-generate --accept-data-loss --verbose
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏** - –≤–æ–∑–º–æ–∂–Ω–æ, –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∏–ª–∏ —Å—Ö–µ–º–æ–π

