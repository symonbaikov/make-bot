# –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞ Make Bot

## ‚úÖ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ

### Phase 1: Project Setup & Database ‚úÖ

- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ monorepo —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ TypeScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ Prisma —Å—Ö–µ–º–∞ —Å –º–æ–¥–µ–ª—è–º–∏
- ‚úÖ Docker Compose –¥–ª—è PostgreSQL
- ‚úÖ Seed –¥–∞–Ω–Ω—ã–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã

### Phase 2: Backend API Development ‚úÖ

- ‚úÖ Express —Å–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –í—Å–µ middleware (auth, error handling, rate limiting)
- ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (User, Session, Action, WebUser, Make)
- ‚úÖ Webhook endpoints (`/api/webhook/bot`, `/api/webhook/paypal`)
- ‚úÖ Admin endpoints (–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ)
- ‚ö†Ô∏è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (GET /api/admin/stats) - –∑–∞–≥–ª—É—à–∫–∞
- ‚ö†Ô∏è –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (GET /api/admin/export) - –∑–∞–≥–ª—É—à–∫–∞

### Phase 3: Telegram Bot Development ‚úÖ

- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–æ—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ Handlers –¥–ª—è –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Backend API
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è email
- ‚úÖ State management
- ‚ö†Ô∏è –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ –≤ Telegram —á–µ—Ä–µ–∑ BotFather

### Phase 4: Frontend Development ‚úÖ

- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Dashboard —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞–º–∏
- ‚úÖ Activity Log
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π
- ‚ö†Ô∏è Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–≥–ª—É—à–∫—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–ø–æ–∫–∞ endpoint –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)

### Phase 5: Make Automation Scenarios ‚úÖ

- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- ‚úÖ SQL –∑–∞–ø—Ä–æ—Å—ã –≥–æ—Ç–æ–≤—ã
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤ Make

---

## ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å

### 1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Statistics Endpoint (GET /api/admin/stats)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π (Dashboard —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–≥–ª—É—à–∫—É)

–ù—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:

- Conversion funnel (started ‚Üí awaiting_payment ‚Üí paid ‚Üí completed)
- Revenue by plan
- Trends over time
- Total sessions, revenue, conversion rate

### 2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Export Endpoint (GET /api/admin/export)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–∑–∂–µ)

–ù—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:

- –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV
- –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–¥ —ç–∫—Å–ø–æ—Ä—Ç–æ–º

---

## üöÄ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### 1. –°–æ–∑–¥–∞—Ç—å Telegram –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
5. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ `bot/.env`:
   ```
   TELEGRAM_BOT_TOKEN="your-token-here"
   ```

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Make —Å—Ü–µ–Ω–∞—Ä–∏–∏

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –≤ Make (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ PostgreSQL –≤ Make
3. –°–æ–∑–¥–∞–π—Ç–µ 4 —Å—Ü–µ–Ω–∞—Ä–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ `docs/MAKE_SETUP_GUIDE.md`
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ webhook URL'—ã –∏–∑ Make
5. –î–æ–±–∞–≤—å—Ç–µ –≤ `backend/.env`:
   ```
   MAKE_WEBHOOK_URL="https://hook.us1.make.com/your-webhook-url"
   ```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

1. **PostgreSQL:** `docker-compose up -d`
2. **Backend:** `cd backend && npm run dev`
3. **Bot:** `cd bot && npm run dev`
4. **Frontend:** `cd frontend && npm run dev` (—É–∂–µ –∑–∞–ø—É—â–µ–Ω)

### 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

```bash
cd backend
npm run db:generate
npm run db:migrate
npm run db:seed
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª: ‚úÖ –ì–û–¢–û–í

- ‚úÖ Backend API —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Telegram Bot –≥–æ—Ç–æ–≤ (–Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω)
- ‚úÖ Frontend —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Make –æ–ø–∏—Å–∞–Ω–∞

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª: ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ –≥–æ—Ç–æ–≤

- ‚ö†Ô∏è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ - –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å endpoint
- ‚ö†Ô∏è –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö - –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å endpoint

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

1. **–°–æ–∑–¥–∞–π—Ç–µ Telegram –±–æ—Ç–∞** —á–µ—Ä–µ–∑ BotFather
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Make —Å—Ü–µ–Ω–∞—Ä–∏–∏** (–º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Å –æ–¥–Ω–æ–≥–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã**
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –±–∞–∑–æ–≤—ã–π flow**

### –î–ª—è –ø–æ–ª–Ω–æ–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:

1. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ Statistics endpoint** (–¥–ª—è Dashboard)
2. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ Export endpoint** (–¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö)
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤—Å–µ Make —Å—Ü–µ–Ω–∞—Ä–∏–∏**
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–ª–Ω—ã–π flow end-to-end**

---

## üéØ –ò—Ç–æ–≥

**–û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≥–æ—Ç–æ–≤ –Ω–∞ ~95%**

–û—Å—Ç–∞–ª–æ—Å—å:

- ‚ö†Ô∏è 2 endpoint'–∞ (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —ç–∫—Å–ø–æ—Ä—Ç) - –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞ (5 –º–∏–Ω—É—Ç)
- üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Make —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (1-2 —á–∞—Å–∞)

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**
