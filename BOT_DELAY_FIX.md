# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–µ–∫ –±–æ—Ç–∞

## –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:

### 1. ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ sessionId

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ—Ç —Ç—Ä–µ–±–æ–≤–∞–ª `sessionId` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ email, –Ω–æ –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

- `handleStart` —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `sessionId` –µ—Å–ª–∏ –æ–Ω –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω
- `handleEmailInput` —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å `sessionId` –∫–∞–∫ –∑–∞—â–∏—Ç—É –æ—Ç –æ—à–∏–±–æ–∫
- –§–æ—Ä–º–∞—Ç: `tg-{userId}-{uuid}`

### 2. ‚ùå –°—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ –æ–ø–ª–∞—Ç—É

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–ª —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ –æ–ø–ª–∞—Ç—É, —Ö–æ—Ç—è –¥–æ–ª–∂–µ–Ω —Ç–æ–ª—å–∫–æ —Å–æ–±–∏—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

- –£–±—Ä–∞–Ω—ã –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø—Ä–æ –æ–ø–ª–∞—Ç—É –∏–∑ `handleStart`
- –°–æ–æ–±—â–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å: "–¶–µ–π –±–æ—Ç –¥–æ–ø–æ–º–æ–∂–µ –≤–∞–º –∑—ñ–±—Ä–∞—Ç–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é"

### 3. ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–µ—Ä–∂–µ–∫

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ–Ω—è—Ç—å, –≥–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –∑–∞–¥–µ—Ä–∂–∫–∏.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∞–∂–¥–æ–≥–æ webhook
- –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç `processingTime` –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å:

### 1. –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
git push origin main
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

–í Railway –æ—Ç–∫—Ä–æ–π—Ç–µ **Bot —Å–µ—Ä–≤–∏—Å** ‚Üí **Logs** –∏ –Ω–∞–π–¥–∏—Ç–µ:

**–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ webhook:**

```
üì• Webhook received { updateId: ..., message: '/start', ... }
Start command received { userId: ..., ... }
Session initialized { sessionId: 'tg-...', ... }
Start command completed { totalTime: '...ms' }
‚úÖ Webhook processed successfully { processingTime: '...ms' }
```

**–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ email:**

```
üì• Webhook received { updateId: ..., message: 'email@example.com', ... }
Email input received { userId: ..., waitingForEmail: true, ... }
Email collected successfully { email: '...', processingTime: '...ms' }
‚úÖ Webhook processed successfully { processingTime: '...ms' }
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –±–æ–ª—å—à–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è `processingTime` (>1000ms), —ç—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–æ–±–ª–µ–º—É:

- **>5000ms** - –≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ —Å backend API
- **>10000ms** - –≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ—Ç—å—é –∏–ª–∏ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ email
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∏–º—è
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–∞–º–∏–ª–∏—é
5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω

–ö–∞–∂–¥—ã–π —à–∞–≥ –¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –±—ã—Å—Ç—Ä–æ (<500ms).

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–¥–µ—Ä–∂–µ–∫:

### –ï—Å–ª–∏ –±–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –≤–æ–æ–±—â–µ:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook URL: `https://make-botbot-production.up.railway.app/webhook`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω (—Å—Ç–∞—Ç—É—Å "Active" –≤ Railway)

### –ï—Å–ª–∏ –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ `processingTime`
2. –ï—Å–ª–∏ –∑–∞–¥–µ—Ä–∂–∫–∞ –≤ `handleStart` - –ø—Ä–æ–±–ª–µ–º–∞ —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π sessionId
3. –ï—Å–ª–∏ –∑–∞–¥–µ—Ä–∂–∫–∞ –≤ `handleEmailInput` - –ø—Ä–æ–±–ª–µ–º–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π email
4. –ï—Å–ª–∏ –∑–∞–¥–µ—Ä–∂–∫–∞ –≤ `apiClient.sendBotWebhook` - –ø—Ä–æ–±–ª–µ–º–∞ —Å backend API

### –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥—ã –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ `üì• Webhook received`
2. –ï—Å–ª–∏ –Ω–µ—Ç - Telegram –Ω–µ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–ø—Ä–æ–±–ª–µ–º–∞ —Å webhook)
3. –ï—Å–ª–∏ –µ—Å—Ç—å, –Ω–æ –Ω–µ—Ç `Start command received` - –ø—Ä–æ–±–ª–µ–º–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –∫–æ–º–∞–Ω–¥

## –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

1. **/start** ‚Üí –û—Ç–≤–µ—Ç —Å—Ä–∞–∑—É (<100ms)
2. **Email** ‚Üí –û—Ç–≤–µ—Ç —Å—Ä–∞–∑—É (<200ms)
3. **–ò–º—è** ‚Üí –û—Ç–≤–µ—Ç —Å—Ä–∞–∑—É (<200ms)
4. **–§–∞–º–∏–ª–∏—è** ‚Üí –û—Ç–≤–µ—Ç —Å—Ä–∞–∑—É (<200ms)
5. **–¢–µ–ª–µ—Ñ–æ–Ω** ‚Üí –û—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ 1-2 —Å–µ–∫—É–Ω–¥—ã (–æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ backend)

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.
